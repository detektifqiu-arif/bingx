<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Portofolio Trading</title>
  <style>
    /* Reset dasar */
    body, h1, ul, li, p, div {
      margin: 0;
      padding: 0;
    }
    body {
      font-family: Arial, sans-serif;
      font-size: 14px;
      background-color: #000;
      color: #fff;
    }
    .container {
      width: 90%;
      max-width: 1200px;
      margin: auto;
      padding: 20px;
    }
    /* Top Navigation Bar */
    .top-nav {
      display: flex;
      align-items: center;
      justify-content: space-between;
      background-color: #111;
      padding: 10px 20px;
      position: relative;
    }
    .nav-left .logo {
      height: 30px;
    }
    .nav-menu {
      list-style: none;
      display: flex;
      gap: 15px;
      font-size: 12px;
      flex-wrap: wrap;
      justify-content: center;
    }
    .nav-menu li {
      cursor: pointer;
    }
    .nav-right {
      display: flex;
      gap: 15px;
      font-size: 12px;
      align-items: center;
      position: relative;
    }
    /* AKUN LIVE dengan background hijau dan teks hitam */
    .akun-live {
      background-color: #28a745;
      color: #000;
      padding: 5px 10px;
      border-radius: 4px;
      font-weight: bold;
      cursor: pointer;
      position: relative;
    }
    /* Dropdown untuk AKUN LIVE */
    .akun-live-dropdown {
      position: absolute;
      top: 35px;
      right: 0;
      background-color: #f00;
      color: #fff;
      border: 1px solid #333;
      width: 120px;
      display: none;
      z-index: 1000;
      font-size: 12px;
      list-style: none;
    }
    .akun-live-dropdown li {
      padding: 8px;
      text-align: center;
      cursor: pointer;
    }
    .akun-live-dropdown li:hover {
      background-color: #d00;
    }
    .nav-item {
      cursor: pointer;
    }
    /* Aset Plugin (Dropdown) */
    .aset-plugin {
      position: absolute;
      top: 60px; /* di bawah navbar */
      right: 20px;
      background-color: #1a1a1a;
      border: 1px solid #333;
      padding: 10px;
      display: none;
      width: 180px;
      font-size: 12px;
      z-index: 1000;
    }
    .aset-plugin .plugin-header {
      display: flex;
      align-items: center;
      gap: 5px;
      margin-bottom: 5px;
    }
    .aset-plugin .plugin-header img {
      width: 25px;
      height: 25px;
      border-radius: 50%;
      object-fit: cover;
    }
    .aset-plugin .plugin-header span.name {
      font-weight: bold;
      flex-grow: 1;
    }
    .aset-plugin .plugin-header span.toggle {
      cursor: pointer;
    }
    .aset-plugin .plugin-body {
      text-align: center;
      font-weight: bold;
    }
    /* Account Info Elegan (tanpa kotak) */
    .account-info {
      display: flex;
      flex-wrap: wrap;
      justify-content: center;
      gap: 20px;
      margin: 20px 0;
      font-size: 14px;
    }
    .account-info .info-item {
      color: #fff;
    }
    .account-info .info-item span.label {
      font-weight: normal;
      color: #aaa;
      margin-right: 5px;
    }
    .account-info .info-item span.value {
      font-weight: bold;
      color: #fff;
    }
    /* Tabel Trading */
    .table-container {
      overflow-x: auto;
    }
    table {
      width: 100%;
      border-collapse: collapse;
      margin-top: 10px;
      background-color: #1e1e1e;
      font-size: 12px;
    }
    th, td {
      padding: 8px;
      border: 1px solid #333;
      text-align: center;
    }
    th {
      background-color: #333;
    }
    /* Warna untuk Order Type */
    .long {
      color: #28a745; /* hijau */
    }
    .short {
      color: #ff4444; /* merah */
    }
    .positive {
      color: #00ff00;
    }
    .negative {
      color: #ff4444;
    }
    /* Responsive untuk mobile */
    @media (max-width: 600px) {
      .nav-menu {
        font-size: 10px;
      }
      .account-info {
        flex-direction: column;
        align-items: center;
      }
    }
    /* Elemen waktu */
    #waktu-sekarang {
      text-align: center;
      margin: 15px 0;
      font-size: 16px;
      font-weight: bold;
    }
  </style>
</head>
<body>
  <!-- Top Navigation Bar -->
  <nav class="top-nav">
    <div class="nav-left">
      <!-- Ganti logo dengan link berikut -->
      <img src="https://media-hosting.imagekit.io//ef613d48f7134f44/bingx_1.png?Expires=1834760669&Key-Pair-Id=K2ZIVPTIP2VGHC&Signature=txvZ-ZeJOXWg2KrYSr3VlQcYeh8iHOt9PF8V-sYyQKVj5LD6rhnDjBc3w~1wRU--h1jEP4JCKKWNIe0WWbXg-uer0oJG1zH019TlqIQHwHQBlmkpOBBvbJnK7t9viQoCa2ipOr45eNBLOyQh89i6TsPiHznRXBudj442QhJxgZ5pGBeWkzTn6-KU-38EwwXy2QBIur3vZzrp9SpC6Y1hmwebs0xatUFl60hTVe4pIF~nVvAs1tZUFcju1AaWUt-lz-hgU2uB~WRqS7sUMAGu0PLLlPF0MSXRW8N~B15YVQrDxB3235JSqr3Mwse4vTx~l-XJ3j4mYaqpb1IAhIPS9Q__" alt="BingX Logo" class="logo">
    </div>
    <ul class="nav-menu">
      <li>Buy Crypto</li>
      <li>Markets</li>
      <li>Spot</li>
      <li>Derivatives</li>
      <li>Copy Trading</li>
      <li>Wealth</li>
      <li>Rewards</li>
      <li>Hub</li>
      <li>More</li>
    </ul>
    <div class="nav-right">
      <!-- AKUN LIVE yang ketika diklik menampilkan dropdown -->
      <div class="akun-live" id="akun-live-btn">AKUN LIVE</div>
      <!-- Dropdown untuk akun live -->
      <ul class="akun-live-dropdown" id="akun-live-dropdown">
        <li id="akun-demo-btn">AKUN DEMO</li>
      </ul>
      <span class="nav-item" id="aset-toggle">aset</span>
    </div>
  </nav>
  
  <!-- Aset Plugin (Dropdown) -->
  <div id="aset-plugin" class="aset-plugin">
    <div class="plugin-header">
      <!-- Ganti foto dengan link berikut -->
      <img src="https://media-hosting.imagekit.io//7f05926042344536/Screenshot_20240828-010551_Photos.jpg?Expires=1834761077&Key-Pair-Id=K2ZIVPTIP2VGHC&Signature=HK5fxQG4VhG-NlPHcVhbdkmAbIYJmulEM5olAGYoeLwtCBxa2qmh0-L-evCXWx7fCehHoZpKJaSoqw5AAS42o4wdIYyciMudxkHbZp5U8YWCxO4bvM-Pdp6zStl0gxlBkaGp4zKwTXtYHr62cbhd2hZn-mWOlPHG775vBn5NFTeYdJiQaJkiNJ9J~6Y4unchgHx4vP5p-6XbnsAuFz8ZYOGAwekoPkKpwG9s8neJgyZDqQ-GF4ZuugImoyFpVvPY30OE~oGWjdMSR~Oc87CLXdx4t8v~gNLOVUgQpitZsqXcEKcjwq4jF26GVce4PwwpbOs1k1idHBvDlNVeK5NHdg__" alt="Foto">
      <span class="name">AKUN LIVE</span>
      <span class="toggle" id="toggle-balance" title="Toggle Saldo">üëÅÔ∏è</span>
    </div>
    <div class="plugin-body">
      Total Assets: <span id="asset-value">280.00</span> USDT
    </div>
  </div>
  
  <div class="container">
    <h1>Portofolio Trading</h1>
    
    <!-- Elemen waktu yang update otomatis -->
    <p id="waktu-sekarang"></p>
    
    <!-- Account Info -->
    <div class="account-info" id="account-info">
      <div class="info-item"><span class="label">USDT:</span><span class="value">0</span></div>
      <div class="info-item"><span class="label">Equity:</span><span class="value">280.00</span></div>
      <div class="info-item"><span class="label">Account Balance:</span><span class="value">280.00</span></div>
      <div class="info-item"><span class="label">Unrealized PnL:</span><span class="value">--</span></div>
      <div class="info-item"><span class="label">Margin Rate:</span><span class="value">0</span></div>
      <div class="info-item"><span class="label">Avail. Margin:</span><span class="value">0.00</span></div>
      <div class="info-item"><span class="label">Position Margin:</span><span class="value">0.00</span></div>
      <div class="info-item"><span class="label">Trial Fund:</span><span class="value">0</span></div>
    </div>

    <!-- Tabel Trading -->
    <div class="table-container" id="table-container">
      <table>
        <thead>
          <tr>
            <th>Pair</th>
            <th>Order Type</th>
            <th>Margin (USDT)</th>
            <th>Leverage</th>
            <th>PnL</th>
            <th>Close Time</th>
            <th>Close Type</th>
            <th>Close Price</th>
            <th>Trading Fee</th>
            <th>Funding Fee</th>
            <th>Open Time</th>
            <th>Avg. Open Price</th>
            <th>Open Type</th>
            <th>TP/SL</th>
            <th>Trailing Stop</th>
            <th>Order No.</th>
          </tr>
        </thead>
        <tbody id="tradeBody">
          <!-- Data order akan di-generate oleh JavaScript -->
        </tbody>
      </table>
    </div>
  </div>
  
  <script>
    // Fungsi utilitas: menambahkan nol di depan angka jika kurang dari 10
    function pad(n) {
      return n < 10 ? "0" + n : n;
    }
    
    // Fungsi formatTime: mengubah objek Date menjadi format YYYY/MM/DD HH:MM:SS
    function formatTime(date) {
      return date.getFullYear() + "/" +
             pad(date.getMonth() + 1) + "/" +
             pad(date.getDate()) + " " +
             pad(date.getHours()) + ":" +
             pad(date.getMinutes()) + ":" +
             pad(date.getSeconds());
    }
    
    // Update waktu menggunakan zona waktu Jakarta
    function updateTime() {
      const now = new Date();
      const options = {
        weekday: "long",
        day: "2-digit",
        month: "long",
        year: "numeric",
        hour: "2-digit",
        minute: "2-digit",
        second: "2-digit",
        hour12: false,
        timeZone: "Asia/Jakarta"
      };
      document.getElementById("waktu-sekarang").textContent = now.toLocaleDateString("id-ID", options);
    }
    updateTime();
    
    // Daftar lengkap koin asli dari script BingX sebelumnya (50 koin)
    const coinList = [
      "BTC", "ETH", "USDT", "XRP", "ADA", "BNB", "SOL", "DOT", "DOGE", "LTC",
      "LINK", "BCH", "UNI", "XLM", "TRX", "MATIC", "AAVE", "ATOM", "FIL", "VET",
      "THETA", "ALGO", "IOST", "KSM", "DASH", "ZEC", "HT", "SHIB", "HOT", "AR",
      "FTT", "DCR", "NEO", "XMR", "FTM", "SUSHI", "LUNA", "BTT", "AMP", "ENJ",
      "1INCH", "EGLD", "TFUEL", "ZIL", "BAT", "WAVES", "VGX", "CELO", "COMP", "QNT"
    ];
    // Untuk mencapai 100 coin, duplikasi daftar tersebut
    const coinsCombined = coinList.concat(coinList);
    
    // Fungsi untuk mengacak array (Fisher‚ÄìYates shuffle)
    function shuffle(array) {
      for (let i = array.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [array[i], array[j]] = [array[j], array[i]];
      }
    }
    shuffle(coinsCombined);
    
    // Indeks untuk mengambil coin secara berurutan dari coinsCombined
    let coinIndex = 0;
    
    // Fungsi untuk menghasilkan order berdasarkan hari, dengan jumlah order per hari antara 8 dan 10.
    // Order akan didistribusikan ke beberapa hari ke belakang hingga total order mencapai 100.
    function generateOrdersMultiDay() {
      let orders = [];
      let totalOrdersTarget = 100;
      let ordersGenerated = 0;
      let day = 0;
      const now = new Date();
      
      // Loop untuk menghasilkan order dari hari ini ke belakang sampai mencapai 100 order
      while (ordersGenerated < totalOrdersTarget) {
        // Tentukan hari: hari 0 adalah hari ini, hari 1 adalah kemarin, dll.
        let currentDay = new Date(now.getFullYear(), now.getMonth(), now.getDate() - day);
        // Jika hari ini, batas atas waktu adalah sekarang; jika tidak, gunakan akhir hari (23:59:59)
        let endDay;
        if (day === 0) {
          endDay = now;
        } else {
          endDay = new Date(currentDay.getFullYear(), currentDay.getMonth(), currentDay.getDate(), 23, 59, 59);
        }
        const diffDay = endDay.getTime() - currentDay.getTime();
        // Jumlah order untuk hari ini, acak antara 8 dan 10
        let ordersCount = Math.floor(Math.random() * (10 - 8 + 1)) + 8;
        // Jika jumlah order yang sudah dihasilkan + ordersCount melebihi target, sesuaikan
        if (ordersGenerated + ordersCount > totalOrdersTarget) {
          ordersCount = totalOrdersTarget - ordersGenerated;
        }
        
        for (let i = 0; i < ordersCount; i++) {
          // Generate offset acak antara 0 dan diffDay sehingga orderTime tidak melebihi batas hari
          const randomOffset = Math.floor(Math.random() * diffDay);
          let orderTime = new Date(currentDay.getTime() + randomOffset);
          // Open time: orderTime dikurangi antara 1 hingga 15 menit, tidak kurang dari awal hari
          let diffMinutes = Math.floor(Math.random() * 15) + 1;
          let openTime = new Date(orderTime.getTime() - diffMinutes * 60000);
          if (openTime.getTime() < currentDay.getTime()) {
            openTime = new Date(currentDay.getTime());
          }
          let times = { close: formatTime(orderTime), open: formatTime(openTime) };
          
          // Ambil coin secara berurutan dari coinsCombined
          const coin = coinsCombined[coinIndex % coinsCombined.length];
          coinIndex++;
          const pair = coin + "USDT";
          const type = Math.random() > 0.5 ? "Long" : "Short";
          const size = getRandomNumber(1, 10, 2);
          const leverage = Math.floor(Math.random() * (75 - 50 + 1)) + 50 + "x";
          const profitPerc = getRandomNumber(50, 300, 2);
          const profitAmount = (size * profitPerc / 100).toFixed(2);
          const pnl = "+" + profitAmount + " (" + profitPerc + "%)";
          const closeType = "Closed manually";
          const closePrice = getRandomNumber(10, 50000, 3);
          const tradingFee = getRandomNumber(0.01, 1, 4);
          const fundingFee = getRandomNumber(-0.1, 0, 5);
          const avgOpenPrice = (closePrice + getRandomNumber(-5, 5, 3)).toFixed(3);
          const openType = "Market Order";
          const tp_sl = "--";
          const trailingStop = "--";
          const orderNo = getRandomOrderNo();
          
          orders.push({
            pair,
            type,
            size: size + " USDT",
            leverage,
            pnl,
            closeTime: times.close,
            closeTimestamp: orderTime.getTime(),
            closeType,
            closePrice,
            tradingFee,
            fundingFee,
            openTime: times.open,
            avgOpenPrice,
            openType,
            tp_sl,
            trailingStop,
            orderNo
          });
          
          ordersGenerated++;
        }
        day++;
      }
      // Urutkan orders descending berdasarkan waktu close
      orders.sort((a, b) => b.closeTimestamp - a.closeTimestamp);
      return orders;
    }
    
    // Fungsi untuk memperbarui tabel order
    function updateOrders() {
      const orders = generateOrdersMultiDay();
      const tradeBody = document.getElementById("tradeBody");
      let rowsHtml = "";
      orders.forEach(order => {
        const orderTypeClass = order.type.toLowerCase(); // 'long' atau 'short'
        rowsHtml += `<tr>
          <td>${order.pair}</td>
          <td class="${orderTypeClass}">${order.type}</td>
          <td>${order.size}</td>
          <td>${order.leverage}</td>
          <td class="positive">${order.pnl}</td>
          <td>${order.closeTime}</td>
          <td>${order.closeType}</td>
          <td>${order.closePrice}</td>
          <td>${order.tradingFee}</td>
          <td>${order.fundingFee}</td>
          <td>${order.openTime}</td>
          <td>${order.avgOpenPrice}</td>
          <td>${order.openType}</td>
          <td>${order.tp_sl}</td>
          <td>${order.trailingStop}</td>
          <td>${order.orderNo}</td>
        </tr>`;
      });
      tradeBody.innerHTML = rowsHtml;
    }
    
    // Panggil updateOrders() saat halaman dimuat
    updateOrders();
    // Perbarui order setiap 30 detik
    setInterval(updateOrders, 30000);
    
    // Toggle untuk aset plugin
    document.getElementById('aset-toggle').addEventListener('click', function() {
      const plugin = document.getElementById('aset-plugin');
      plugin.style.display = plugin.style.display === 'block' ? 'none' : 'block';
    });
    
    // Toggle untuk menyembunyikan/menampilkan saldo di aset plugin
    document.getElementById('toggle-balance').addEventListener('click', function() {
      const assetValue = document.getElementById('asset-value');
      assetValue.style.visibility = assetValue.style.visibility === 'hidden' ? 'visible' : 'hidden';
    });
    
    // Dropdown untuk AKUN LIVE
    const akunLiveBtn = document.getElementById('akun-live-btn');
    const akunLiveDropdown = document.getElementById('akun-live-dropdown');
    akunLiveBtn.addEventListener('click', function() {
      akunLiveDropdown.style.display = akunLiveDropdown.style.display === 'block' ? 'none' : 'block';
    });
    
    // Ketika opsi AKUN DEMO diklik, kosongkan halaman portofolio
    document.getElementById('akun-demo-btn').addEventListener('click', function() {
      document.getElementById('account-info').innerHTML = '<h2 style="text-align:center; margin:20px 0;">Portofolio Kosong</h2>';
      document.getElementById('table-container').innerHTML = '';
      akunLiveDropdown.style.display = 'none';
    });
  </script>
</body>
</html>
